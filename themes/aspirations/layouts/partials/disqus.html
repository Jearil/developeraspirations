{{ if and .Site.Params.disqusShortname .IsPage (not .Params.disable_comments) (hugo.IsProduction) }}
<div id="show_comments" class="center">
    <a onclick="show_disqus()">Show Comments</a>
</div>
<div id="disqus_thread"></div>
<script>
    var show_disqus = function () {
        document.getElementById("show_comments").hidden = true;
        disqus();
    }

    var disqus = function () {
        var d = document, s = d.createElement('script');

        s.src = 'https://{{ .Site.Params.disqusShortname }}.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    };
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments
        powered by Disqus.</a></noscript>
{{ end }}
